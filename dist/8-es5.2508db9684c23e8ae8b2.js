function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{FoIO:function(e,t,n){"use strict";n.r(t);var a,r=n("ofXK"),c=n("3Pt+"),i=n("PCNd"),o=n("tyNb"),s=n("I9ts"),l=n("dK5w"),u=n("M9IT"),b=n("+0xr"),d=n("Dh3D"),m=n("fXoL"),f=n("mroY"),h=n("qXBG"),p=n("yTNM"),g=n("0IaG"),v=n("kmnG"),w=n("qFsG"),T=n("NFeN"),C=n("PA/I"),y=((a=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"transform",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];var r=n[0];return e.length>=+r?e.substring(0,+r)+"...":e}}]),e}()).\u0275fac=function(e){return new(e||a)},a.\u0275pipe=m.Nb({name:"ellipsis",type:a,pure:!0}),a);function S(e,t){if(1&e){var n=m.Vb();m.Ub(0,"div",27),m.Ub(1,"strong"),m.Ec(2,"Error:"),m.Tb(),m.Ec(3," Server error please try after some time "),m.Ub(4,"button",28),m.cc("click",(function(e){return m.wc(n),m.gc().hideErrorMsg()})),m.Ub(5,"span",29),m.Ec(6,"\xd7"),m.Tb(),m.Tb(),m.Tb()}}function U(e,t){if(1&e){var n=m.Vb();m.Ub(0,"div",30),m.Ub(1,"strong"),m.Ec(2,"Success:"),m.Tb(),m.Ec(3),m.Ub(4,"button",28),m.cc("click",(function(e){return m.wc(n),m.gc().hideMsg("showSuccessMsg")})),m.Ub(5,"span",29),m.Ec(6,"\xd7"),m.Tb(),m.Tb(),m.Tb()}if(2&e){var a=m.gc();m.Cb(3),m.Gc(" Announcement has been ",a.actionName," successfully. ")}}function k(e,t){if(1&e){var n=m.Vb();m.Ub(0,"div",31),m.Ub(1,"strong"),m.Ec(2,"Message: "),m.Tb(),m.Ec(3),m.Ub(4,"button",28),m.cc("click",(function(e){return m.wc(n),m.gc().hideErrorMsg()})),m.Ub(5,"span",29),m.Ec(6,"\xd7"),m.Tb(),m.Tb(),m.Tb()}if(2&e){var a=m.gc();m.Cb(3),m.Gc(" ",a.warningErrMsg," ")}}function D(e,t){if(1&e){var n=m.Vb();m.Ub(0,"div",32),m.Ub(1,"button",33),m.cc("click",(function(e){return m.wc(n),m.gc().showForm(!1)})),m.Ec(2,"Add Announcement"),m.Tb(),m.Tb()}}function E(e,t){if(1&e){var n=m.Vb();m.Ub(0,"div",34),m.Ub(1,"span",35),m.cc("click",(function(e){return m.wc(n),m.gc().hideForm()})),m.Ec(2,"X"),m.Tb(),m.Ub(3,"div",36),m.Ub(4,"div",37),m.Ub(5,"div",38),m.Ub(6,"form",39),m.cc("ngSubmit",(function(e){return m.wc(n),m.gc().onSubmit(!1)})),m.Ub(7,"mat-form-field",40),m.Ub(8,"mat-label"),m.Ec(9,"Title"),m.Tb(),m.Pb(10,"input",41),m.Tb(),m.Ub(11,"mat-form-field",42),m.Ub(12,"mat-label"),m.Ec(13,"Description"),m.Tb(),m.Pb(14,"textarea",43),m.Tb(),m.Ub(15,"mat-form-field",40),m.Ub(16,"mat-label"),m.Ec(17,"Order"),m.Tb(),m.Pb(18,"input",44),m.Tb(),m.Ub(19,"div",45),m.Ub(20,"button",46),m.Ec(21),m.Tb(),m.Ub(22,"button",47),m.Ec(23),m.Tb(),m.Tb(),m.Tb(),m.Tb(),m.Tb(),m.Tb(),m.Tb()}if(2&e){var a=m.gc();m.Cb(6),m.mc("formGroup",a.formGroup),m.Cb(15),m.Fc(a.langObj.val.reset),m.Cb(2),m.Fc(a.langObj.val.submit)}}function F(e,t){1&e&&(m.Ub(0,"th",48),m.Ec(1," Title "),m.Tb())}function O(e,t){if(1&e){var n=m.Vb();m.Ub(0,"td",49),m.cc("click",(function(e){m.wc(n);var a=t.$implicit;return m.gc().announcementDetails(a)})),m.Ec(1),m.Tb()}if(2&e){var a=t.$implicit;m.Cb(1),m.Gc(" ",a.title," ")}}function I(e,t){1&e&&(m.Ub(0,"th",48),m.Ec(1," Description "),m.Tb())}function M(e,t){if(1&e&&(m.Ub(0,"td",50),m.Ec(1),m.hc(2,"ellipsis"),m.Tb()),2&e){var n=t.$implicit;m.Cb(1),m.Gc(" ",m.jc(2,1,n.description,"100")," ")}}function j(e,t){1&e&&(m.Ub(0,"th",48),m.Ec(1," Order "),m.Tb())}function A(e,t){if(1&e){var n=m.Vb();m.Ub(0,"td",51),m.Ub(1,"input",52),m.cc("keydown",(function(e){m.wc(n);var a=t.$implicit;return m.gc().updateOrder(a,!0,e)}))("blur",(function(e){m.wc(n);var a=t.$implicit;return m.gc().updateOrder(a,!1,e)})),m.Tb(),m.Tb()}if(2&e){var a=t.$implicit;m.Cb(1),m.mc("value",a.ordering)}}function G(e,t){if(1&e&&(m.Ub(0,"th",53),m.Ec(1),m.Tb()),2&e){var n=m.gc();m.Cb(1),m.Gc(" ",n.langObj.val.action," ")}}function R(e,t){if(1&e){var n=m.Vb();m.Ub(0,"td",54),m.Ub(1,"span",55),m.Ub(2,"mat-icon",56),m.cc("click",(function(e){m.wc(n);var a=t.$implicit;return m.gc().editDetails(a)})),m.Ec(3,"edit"),m.Tb(),m.Ub(4,"mat-icon",57),m.cc("click",(function(e){m.wc(n);var a=t.$implicit;return m.gc().delete(a)})),m.Ec(5,"delete_forever"),m.Tb(),m.Tb(),m.Tb()}}function P(e,t){1&e&&m.Pb(0,"tr",58)}function N(e,t){1&e&&m.Pb(0,"tr",59)}function _(e,t){if(1&e&&(m.Ub(0,"div",60),m.Ec(1),m.Tb()),2&e){var n=m.gc();m.Cb(1),m.Fc(n.langObj.val.noRecordFound)}}function x(e,t){1&e&&m.Pb(0,"app-loadingbar",61)}var V,$,H=function(e){return{"ipa-container":e}},q=function(){return[10,25,100]},L=[{path:"",component:(V=function(){function e(t,n,a,r){_classCallCheck(this,e),this.langService=t,this.authService=n,this.apiService=a,this.dialog=r,this.langObj={},this.showErrorMsg=!1,this.showFormFields=!1,this.showWarningMsg=!1,this.announcements=[],this.announcementHeaders=["title","description","order","action"],this.userAccess={},this.langService.setLang(this.langService.defaultLangCode),this.langObj=this.langService.langDetail}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.announcements=[],this.userAccess=this.authService.userAccess,this.apiService.fetchAnnouncement().subscribe((function(t){var n=t.data||[];e.announcements=n,e.dataSource.disconnect(),e.dataSource=null,setTimeout((function(){e.dataSource=new b.o(n),e.dataSource.paginator=e.paginator,e.dataSource.sort=e.sort}),100)})),this.dataSource=new b.o(this.announcements),this.userType=this.authService.getUserType(),this.loadingObj=this.apiService.loadingObj,this.formGroup=new c.f({title:new c.c("",[c.s.required]),description:new c.c("",[c.s.required]),order:new c.c(1,c.s.required)})}},{key:"ngAfterViewInit",value:function(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}},{key:"hideErrorMsg",value:function(){this.showErrorMsg=!1}},{key:"applyFilter",value:function(e){this.dataSource.filter=e.target.value.trim().toLowerCase()}},{key:"showForm",value:function(e){this.showFormFields=!0}},{key:"onSubmit",value:function(e){var t=this;if(this.showErrorMsg=!1,this.showSuccessMsg=!1,this.formGroup.valid||e){var n=e||Object.assign({},this.formGroup.value);this.actionName="updated";var a=!0;this.selectedRecord||e?n.id=e?e.id:this.selectedRecord.id:(a=!1,this.actionName="added"),this.apiService.addAnnouncement(n,a).subscribe((function(e){t.showSuccessMsg=!0,t.showFormFields=!1,t.selectedRecord=null,t.formGroup.reset();var n=e.data||[];t.announcements=n,t.dataSource.disconnect(),t.dataSource=null,setTimeout((function(){t.dataSource=new b.o(n),t.dataSource.paginator=t.paginator,t.dataSource.sort=t.sort}),100)}),(function(e){t.showErrorMsg=!0}))}}},{key:"hideForm",value:function(){this.showFormFields=!1,this.formGroup.reset()}},{key:"hideMsg",value:function(e){this[e]=!1}},{key:"updateOrder",value:function(e,t,n){(n.keyCode&&t&&13===n.keyCode&&+n.target.value!=+e.ordering||!t&&+n.target.value!=+e.ordering)&&(e.order=+n.target.value,this.onSubmit(e))}},{key:"editDetails",value:function(e){this.selectedRecord=e,this.formGroup.setValue({title:e.title,description:e.description,order:e.ordering}),this.showFormFields=!0}},{key:"delete",value:function(e){var t=this;this.showSuccessMsg=!1,this.selectedRecordToDel=e,this.dialog.open(l.a,{data:{imgUrl:"/assets/images/warning-icon.png",msg:"Are you sure you want to delete this announcement?",buttonType:"action",successBtn:"Confirm"}}).afterClosed().subscribe((function(e){e&&t.apiService.deleteAnnouncemet(t.selectedRecordToDel.id).subscribe((function(e){t.actionName="deleted",t.showSuccessMsg=!0,t.showFormFields=!1,t.selectedRecord=null,t.selectedRecordToDel=null,t.formGroup.reset();var n=e.data||[];t.announcements=n,t.dataSource.disconnect(),t.dataSource=null,setTimeout((function(){t.dataSource=new b.o(n),t.dataSource.paginator=t.paginator,t.dataSource.sort=t.sort}),100)}),(function(e){t.showErrorMsg=!0}))}))}},{key:"announcementDetails",value:function(e){this.dialog.open(l.a,{data:{header:e.title,msg:e.description,buttonType:"normal"}})}}]),e}(),V.\u0275fac=function(e){return new(e||V)(m.Ob(f.a),m.Ob(h.a),m.Ob(p.a),m.Ob(g.b))},V.\u0275cmp=m.Ib({type:V,selectors:[["app-announcements"]],viewQuery:function(e,t){var n;1&e&&(m.Jc(u.a,!0),m.Jc(d.a,!0)),2&e&&(m.tc(n=m.dc())&&(t.paginator=n.first),m.tc(n=m.dc())&&(t.sort=n.first))},decls:32,vars:18,consts:[[1,"container-fluid",3,"ngClass"],["class","alert alert-danger alert-dismissible fade show m-t-b-10","role","alert",4,"ngIf"],["class","alert alert-success alert-dismissible fade show m-t-b-10","role","alert",4,"ngIf"],["class","alert alert-warning alert-dismissible fade show m-t-b-10","role","alert",4,"ngIf"],["class","filter-box",4,"ngIf"],["class","announcement-forms",4,"ngIf"],[1,"table-box","mat-elevation-z8"],[1,"flex-sb","dashboard-filters"],[1,"header-2","table-header"],[1,"fl-jc-rg","mg-rt-10"],["matInput","","autocomplete","off",3,"placeholder","keyup"],["mat-table","","matSort","",1,"full-width",3,"dataSource"],["matColumnDef","title"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","","class","link-label",3,"click",4,"matCellDef"],["matColumnDef","description"],["mat-cell","","class","announcement-desc",4,"matCellDef"],["matColumnDef","order"],["mat-cell","",4,"matCellDef"],["matColumnDef","action"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","max-w-200",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","no-record-found",4,"ngIf"],[3,"pageSizeOptions"],["class","ipa-spinner",4,"ngIf"],["role","alert",1,"alert","alert-danger","alert-dismissible","fade","show","m-t-b-10"],["type","button","data-dismiss","alert","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],["role","alert",1,"alert","alert-success","alert-dismissible","fade","show","m-t-b-10"],["role","alert",1,"alert","alert-warning","alert-dismissible","fade","show","m-t-b-10"],[1,"filter-box"],["type","button",1,"btn","bgc-primary",3,"click"],[1,"announcement-forms"],[1,"close-icon",3,"click"],[1,"container-fluid"],[1,"row","course-form"],[1,"col-xs-12","col-sm-10","col-md-6","col-sm-offset-1","col-md-offset-2","mg-auto"],[3,"formGroup","ngSubmit"],[1,"full-width"],["matInput","","formControlName","title"],["appearance","outline",1,"full-width"],["matInput","","formControlName","description"],["matInput","","type","number","formControlName","order"],[1,"form-btn","jc-fe"],["type","buton",1,"btn","btn-secondary","reset-btn","mg-rt-10"],["type","submit",1,"btn","bgc-primary"],["mat-header-cell","","mat-sort-header",""],["mat-cell","",1,"link-label",3,"click"],["mat-cell","",1,"announcement-desc"],["mat-cell",""],["type","number",1,"ordering-field",3,"value","keydown","blur"],["mat-header-cell",""],["mat-cell","",1,"max-w-200"],[1,"announcement-action"],["title","Edit","aria-hidden","false","aria-label","Example edit icon",1,"edit-icon",3,"click"],["title","Edit","aria-hidden","false","aria-label","Example delete_forever icon",1,"delete-icon",3,"click"],["mat-header-row",""],["mat-row",""],[1,"no-record-found"],[1,"ipa-spinner"]],template:function(e,t){1&e&&(m.Ub(0,"div",0),m.Dc(1,S,7,0,"div",1),m.Dc(2,U,7,1,"div",2),m.Dc(3,k,7,1,"div",3),m.Dc(4,D,3,0,"div",4),m.Dc(5,E,24,3,"div",5),m.Ub(6,"div",6),m.Ub(7,"div",7),m.Ub(8,"h2",8),m.Ec(9),m.Tb(),m.Ub(10,"mat-form-field",9),m.Ub(11,"mat-label"),m.Ec(12),m.Tb(),m.Ub(13,"input",10),m.cc("keyup",(function(e){return t.applyFilter(e)})),m.Tb(),m.Tb(),m.Tb(),m.Ub(14,"table",11),m.Sb(15,12),m.Dc(16,F,2,0,"th",13),m.Dc(17,O,2,1,"td",14),m.Rb(),m.Sb(18,15),m.Dc(19,I,2,0,"th",13),m.Dc(20,M,3,4,"td",16),m.Rb(),m.Sb(21,17),m.Dc(22,j,2,0,"th",13),m.Dc(23,A,2,1,"td",18),m.Rb(),m.Sb(24,19),m.Dc(25,G,2,1,"th",20),m.Dc(26,R,6,0,"td",21),m.Rb(),m.Dc(27,P,1,0,"tr",22),m.Dc(28,N,1,0,"tr",23),m.Tb(),m.Dc(29,_,2,1,"div",24),m.Pb(30,"mat-paginator",25),m.Tb(),m.Tb(),m.Dc(31,x,1,0,"app-loadingbar",26)),2&e&&(m.mc("ngClass",m.pc(15,H,"ipa"===t.userType)),m.Cb(1),m.mc("ngIf",t.showErrorMsg),m.Cb(1),m.mc("ngIf",t.showSuccessMsg),m.Cb(1),m.mc("ngIf",t.showWarningMsg),m.Cb(1),m.mc("ngIf",t.userAccess.allowAnnouncement||t.userAccess.isAdmin),m.Cb(1),m.mc("ngIf",t.showFormFields),m.Cb(4),m.Fc(t.langObj.val.courseDashboard),m.Cb(3),m.Fc(t.langObj.val.search),m.Cb(1),m.mc("placeholder",t.langObj.val.search),m.Cb(1),m.mc("dataSource",t.dataSource),m.Cb(13),m.mc("matHeaderRowDef",t.announcementHeaders),m.Cb(1),m.mc("matRowDefColumns",t.announcementHeaders),m.Cb(1),m.mc("ngIf",!t.announcements||0===t.announcements.length),m.Cb(1),m.mc("pageSizeOptions",m.oc(17,q)),m.Cb(1),m.mc("ngIf",t.loadingObj.show))},directives:[r.i,r.k,v.b,v.e,w.b,b.n,d.a,b.c,b.i,b.b,b.k,b.m,u.a,c.t,c.n,c.g,c.b,c.m,c.e,c.q,b.h,d.b,b.a,T.a,b.j,b.l,C.a],pipes:[y],styles:[""]}),V),canActivate:[s.a]}],J=(($=function e(){_classCallCheck(this,e)}).\u0275mod=m.Mb({type:$}),$.\u0275inj=m.Lb({factory:function(e){return new(e||$)},imports:[[o.f.forChild(L)],o.f]}),$);n.d(t,"AnnouncementsModule",(function(){return z}));var X,z=((X=function e(){_classCallCheck(this,e)}).\u0275mod=m.Mb({type:X}),X.\u0275inj=m.Lb({factory:function(e){return new(e||X)},imports:[[r.c,c.r,J,i.a]]}),X)}}]);