(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{uHdG:function(t,e,a){"use strict";a.r(e);var c=a("ofXK"),n=a("3Pt+"),i=a("PCNd"),o=a("tyNb"),s=a("I9ts"),r=a("fXoL");let l=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Ib({type:t,selectors:[["app-reports"]],decls:1,vars:0,template:function(t,e){1&t&&r.Pb(0,"router-outlet")},directives:[o.g],styles:[""]}),t})();var d=a("M9IT"),b=a("+0xr"),m=a("Dh3D"),u=a("0IaG"),f=a("EUZL"),p=a("mroY"),g=a("kmnG"),h=a("qFsG"),C=a("OHc7");function D(t,e){1&t&&(r.Ub(0,"th",28),r.Ec(1," No "),r.Tb())}function v(t,e){if(1&t&&(r.Ub(0,"td",29),r.Ec(1),r.Tb()),2&t){const t=e.index;r.Cb(1),r.Gc(" ",t+1,"")}}function w(t,e){1&t&&(r.Ub(0,"th",30),r.Ec(1," Date "),r.Tb())}function T(t,e){if(1&t&&(r.Ub(0,"td",29),r.Ec(1),r.hc(2,"dateFormat"),r.Tb()),2&t){const t=e.$implicit;r.Cb(1),r.Gc(" ",r.jc(2,1,t.attended_date,"dd/mm/yyyy")," ")}}function U(t,e){1&t&&(r.Ub(0,"th",30),r.Ec(1," Time "),r.Tb())}function S(t,e){if(1&t&&(r.Ub(0,"td",31),r.Ec(1),r.hc(2,"dateFormat"),r.Tb()),2&t){const t=e.$implicit;r.Cb(1),r.Gc(" ",r.jc(2,1,t.attended_date,"time")," ")}}function y(t,e){1&t&&r.Pb(0,"tr",32)}function O(t,e){1&t&&r.Pb(0,"tr",33)}function E(t,e){if(1&t&&(r.Ub(0,"div",34),r.Ec(1),r.Tb()),2&t){const t=r.gc();r.Cb(1),r.Fc(t.langObj.val.noRecordFound)}}const j=function(){return[10,25,100]};let _=(()=>{class t{constructor(t,e){this.data=t,this.langService=e,this.langObj={},this.attendanceHeaders=["position","date","time"],this.langService.setLang(this.langService.defaultLangCode),this.langObj=this.langService.langDetail}ngOnInit(){this.attendanceDetails=this.data.attendanceDetails,this.dataSource=new b.o(this.data.attendanceDetails)}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}applyFilter(t){this.dataSource.filter=t.target.value.trim().toLowerCase()}exportToExcel(){const t=[["Candidate Name","Course Name","Start Date","End Date","Days"]],e=[["Date","Time"]];let a=this.data.start_date.split(" ")[0];a=a.split("-");let c=this.data.end_date.split(" ")[0];c=c.split("-"),t.push([this.data.candidateName,this.data.course_name,`${a[2]}/${a[1]}/${a[0]}`,`${c[2]}/${c[1]}/${c[0]}`,this.data.days]);for(let s=0;s<this.data.attendanceDetails.length;s++){const t=this.data.attendanceDetails[s].attended_date.split(" ");let a=t[0];a=a.split("-"),a=`${a[2]}/${a[1]}/${a[0]}`;let c=t[1];const n=c.split(":");let i=+c.split(":")[0],o="AM";12==i&&(o="PM"),0==i&&(i=12,o="AM"),i>12&&(i-=12,o="PM"),e.push([a,`${i}:${n[1]}:${n[2]} ${o}`])}const n=f.utils.book_new(),i=f.utils.aoa_to_sheet(t),o=f.utils.aoa_to_sheet(e);new Date,f.utils.book_append_sheet(n,i,"Course Detail"),f.utils.book_append_sheet(n,o,"Attendance Details"),i["!cols"]=[{wch:30},{wch:30},{wch:20},{wch:20},{wch:20}],o["!cols"]=[{wch:30},{wch:30}],f.writeFile(n,"candiate_attendace_details.xlsx")}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(u.a),r.Ob(p.a))},t.\u0275cmp=r.Ib({type:t,selectors:[["app-attendance"]],viewQuery:function(t,e){var a;1&t&&(r.Jc(d.a,!0),r.Jc(m.a,!0)),2&t&&(r.tc(a=r.dc())&&(e.paginator=a.first),r.tc(a=r.dc())&&(e.sort=a.first))},decls:57,vars:24,consts:[["mat-dialog-title",""],[1,"mat-typography"],[1,"course-detail-box"],[1,"grid-container"],[1,"grid-row"],[1,"label-box"],[1,"grid-row","download-box"],[1,"img-box-25","img",3,"click"],["src","/assets/images/download.png","title","Download"],[1,"table-box","mat-elevation-z8"],[1,"flex-sb","dashboard-filters"],[1,"header-2","table-header"],[1,"fl-jc-rg","mg-rt-10"],["matInput","","autocomplete","off",3,"placeholder","keyup"],["mat-table","","matSort","",1,"full-width",3,"dataSource"],["matColumnDef","position"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","date"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","time"],["mat-cell","","class","announcement-desc",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","no-record-found",4,"ngIf"],[3,"pageSizeOptions"],["align","end"],["mat-button","","mat-dialog-close","",1,"btn","bgc-primary"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","","mat-sort-header",""],["mat-cell","",1,"announcement-desc"],["mat-header-row",""],["mat-row",""],[1,"no-record-found"]],template:function(t,e){1&t&&(r.Ub(0,"h2",0),r.Ec(1,"Attendance Details"),r.Tb(),r.Ub(2,"mat-dialog-content",1),r.Pb(3,"div",2),r.Ub(4,"div",3),r.Ub(5,"div",4),r.Ub(6,"div",5),r.Ec(7),r.Tb(),r.Ub(8,"div"),r.Ec(9),r.Tb(),r.Tb(),r.Ub(10,"div",4),r.Ub(11,"div",5),r.Ec(12),r.Tb(),r.Ub(13,"div"),r.Ec(14),r.hc(15,"dateFormat"),r.Tb(),r.Tb(),r.Ub(16,"div",4),r.Ub(17,"div",5),r.Ec(18),r.Tb(),r.Ub(19,"div"),r.Ec(20),r.hc(21,"dateFormat"),r.Tb(),r.Tb(),r.Ub(22,"div",4),r.Ub(23,"div",5),r.Ec(24),r.Tb(),r.Ub(25,"div"),r.Ec(26),r.Tb(),r.Tb(),r.Ub(27,"div",6),r.Ub(28,"div",5),r.Ec(29),r.Tb(),r.Ub(30,"div",7),r.cc("click",(function(t){return e.exportToExcel()})),r.Pb(31,"img",8),r.Tb(),r.Tb(),r.Tb(),r.Ub(32,"div",9),r.Ub(33,"div",10),r.Ub(34,"h2",11),r.Ec(35),r.Tb(),r.Ub(36,"mat-form-field",12),r.Ub(37,"mat-label"),r.Ec(38),r.Tb(),r.Ub(39,"input",13),r.cc("keyup",(function(t){return e.applyFilter(t)})),r.Tb(),r.Tb(),r.Tb(),r.Ub(40,"table",14),r.Sb(41,15),r.Dc(42,D,2,0,"th",16),r.Dc(43,v,2,1,"td",17),r.Rb(),r.Sb(44,18),r.Dc(45,w,2,0,"th",19),r.Dc(46,T,3,4,"td",17),r.Rb(),r.Sb(47,20),r.Dc(48,U,2,0,"th",19),r.Dc(49,S,3,4,"td",21),r.Rb(),r.Dc(50,y,1,0,"tr",22),r.Dc(51,O,1,0,"tr",23),r.Tb(),r.Dc(52,E,2,1,"div",24),r.Pb(53,"mat-paginator",25),r.Tb(),r.Tb(),r.Ub(54,"mat-dialog-actions",26),r.Ub(55,"button",27),r.Ec(56,"Close"),r.Tb(),r.Tb()),2&t&&(r.Cb(7),r.Fc(e.langObj.val.course),r.Cb(2),r.Fc(e.data.course_name),r.Cb(3),r.Fc(e.langObj.val.startDate),r.Cb(2),r.Fc(r.jc(15,17,e.data.start_date,"dd/mm/yyyy")),r.Cb(4),r.Fc(e.langObj.val.endDate),r.Cb(2),r.Fc(r.jc(21,20,e.data.end_date,"dd/mm/yyyy")),r.Cb(4),r.Fc(e.langObj.val.days),r.Cb(2),r.Fc(e.data.days),r.Cb(3),r.Fc(e.langObj.val.exportToExcel),r.Cb(6),r.Fc(e.langObj.val.courseDashboard),r.Cb(3),r.Fc(e.langObj.val.search),r.Cb(1),r.mc("placeholder",e.langObj.val.search),r.Cb(1),r.mc("dataSource",e.dataSource),r.Cb(10),r.mc("matHeaderRowDef",e.attendanceHeaders),r.Cb(1),r.mc("matRowDefColumns",e.attendanceHeaders),r.Cb(1),r.mc("ngIf",!e.attendanceDetails||0===e.attendanceDetails.length),r.Cb(1),r.mc("pageSizeOptions",r.oc(23,j)))},directives:[u.h,u.e,g.b,g.e,h.b,b.n,m.a,b.c,b.i,b.b,b.k,b.m,c.k,d.a,u.c,u.d,b.h,b.a,m.b,b.j,b.l],pipes:[C.a],styles:[".grid-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));grid-gap:20px;justify-items:flex-start;border-radius:10px;padding:10px 22px;box-shadow:0 0 4px #b8b4b4;margin-top:7px}.description-box[_ngcontent-%COMP%]{margin-top:20px}.label-box[_ngcontent-%COMP%]{font-size:13px;color:#380c3c;font-weight:600;letter-spacing:1px}"]}),t})();var I=a("dK5w"),R=a("qXBG"),x=a("yTNM"),k=a("cxbk"),F=a("NFeN"),A=a("Qu3c"),$=a("X9+O");function G(t,e){if(1&t&&(r.Ub(0,"th",17),r.Ec(1),r.Tb()),2&t){const t=r.gc().$implicit,e=r.gc(2);r.Cb(1),r.Gc(" ",e.langObj.val[t]," ")}}function P(t,e){if(1&t){const t=r.Vb();r.Ub(0,"mat-icon",22),r.cc("click",(function(e){r.wc(t);const a=r.gc(2).$implicit;return r.gc(3).getCertificate(a)})),r.Ec(1,"get_app"),r.Tb()}}function H(t,e){if(1&t&&(r.Ub(0,"div"),r.Dc(1,P,2,0,"mat-icon",21),r.Tb()),2&t){const t=r.gc().$implicit;r.Cb(1),r.mc("ngIf","approved"===t.status)}}function M(t,e){if(1&t){const t=r.Vb();r.Ub(0,"mat-icon",24),r.cc("click",(function(e){r.wc(t);const a=r.gc(2).$implicit;return r.gc(3).getAttendanceDetails(a)})),r.Ec(1,"description"),r.Tb()}}function z(t,e){if(1&t&&(r.Ub(0,"div"),r.Dc(1,M,2,0,"mat-icon",23),r.Tb()),2&t){const t=r.gc().$implicit;r.Cb(1),r.mc("ngIf","approved"===t.status)}}function L(t,e){if(1&t&&(r.Ub(0,"div"),r.Ec(1),r.Tb()),2&t){const t=r.gc().$implicit,e=r.gc().$implicit,a=r.gc(2);r.Cb(1),r.Fc("department"===e?a.langObj.val.pmoDepartments[t[e]]:t[e])}}function N(t,e){if(1&t&&(r.Ub(0,"td",18),r.Dc(1,H,2,1,"div",19),r.Dc(2,z,2,1,"div",19),r.Dc(3,L,2,1,"div",20),r.Tb()),2&t){const t=r.gc().$implicit;r.mc("ngSwitch",t),r.Cb(1),r.mc("ngSwitchCase","certificate"),r.Cb(1),r.mc("ngSwitchCase","attendanceReport")}}function V(t,e){1&t&&(r.Sb(0,14),r.Dc(1,G,2,1,"th",15),r.Dc(2,N,4,3,"td",16),r.Rb()),2&t&&r.mc("matColumnDef",e.$implicit)}function J(t,e){if(1&t&&(r.Ub(0,"td",27),r.Ec(1),r.Tb()),2&t){const t=r.gc(3);r.Cb(1),r.Gc(" ",t.langObj.val.noRecordFound,"")}}function q(t,e){1&t&&(r.Sb(0,25),r.Dc(1,J,2,1,"td",26),r.Rb())}function B(t,e){1&t&&r.Pb(0,"tr",28)}function Q(t,e){1&t&&r.Pb(0,"tr",29)}function X(t,e){1&t&&r.Pb(0,"tr",31)}const Y=function(){return["noRecord"]};function K(t,e){1&t&&(r.Sb(0),r.Dc(1,X,1,0,"tr",30),r.Rb()),2&t&&(r.Cb(1),r.mc("matFooterRowDef",r.oc(1,Y)))}const Z=function(){return[10,25,100]};function W(t,e){if(1&t){const t=r.Vb();r.Ub(0,"div",2),r.Ub(1,"div",3),r.Ub(2,"h2",4),r.Ec(3),r.Tb(),r.Ub(4,"mat-form-field",5),r.Ub(5,"mat-label"),r.Ec(6),r.Tb(),r.Ub(7,"input",6),r.cc("keyup",(function(e){return r.wc(t),r.gc().applyFilter(e)})),r.Tb(),r.Tb(),r.Tb(),r.Ub(8,"table",7),r.Dc(9,V,3,1,"ng-container",8),r.Dc(10,q,2,0,"ng-container",9),r.Dc(11,B,1,0,"tr",10),r.Dc(12,Q,1,0,"tr",11),r.Dc(13,K,2,2,"ng-container",12),r.Tb(),r.Pb(14,"mat-paginator",13),r.Tb()}if(2&t){const t=r.gc();r.Cb(3),r.Hc("",t.title," ",t.langObj.val.candidateDashboard,""),r.Cb(3),r.Fc(t.langObj.val.search),r.Cb(1),r.mc("placeholder",t.langObj.val.search),r.Cb(1),r.mc("dataSource",t.dataSource),r.Cb(1),r.mc("ngForOf",t.headers),r.Cb(1),r.mc("ngIf",!t.details||0===t.details.length),r.Cb(1),r.mc("matHeaderRowDef",t.headers),r.Cb(1),r.mc("matRowDefColumns",t.headers),r.Cb(1),r.mc("ngIf",!t.details||0===t.details.length),r.Cb(1),r.mc("pageSizeOptions",r.oc(11,Z))}}function tt(t,e){if(1&t){const t=r.Vb();r.Ub(0,"div",32),r.Ub(1,"div",33),r.cc("click",(function(e){return r.wc(t),r.gc().closeAttendancePopup()})),r.Tb(),r.Ub(2,"div",34),r.Ub(3,"div",35),r.cc("click",(function(e){return r.wc(t),r.gc().closeAttendancePopup()})),r.Ub(4,"mat-icon",36),r.Ec(5,"close"),r.Tb(),r.Tb(),r.Ub(6,"div",37),r.Pb(7,"h5",38),r.Ub(8,"div",39),r.Pb(9,"app-candidate-form"),r.Tb(),r.Tb(),r.Tb(),r.Tb()}}let et=(()=>{class t{constructor(t,e,a,c){this.authService=t,this.apiService=e,this.langService=a,this.dialog=c,this.getAttendance=new r.o,this.showAttendancePopup=!1,this.langObj={},this.showTable=!1,this.langService.setLang(this.langService.defaultLangCode),this.langObj=this.langService.langDetail}ngOnInit(){this.dataSource=new b.o(this.details),this.showTable=!0}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}applyFilter(t){this.dataSource.filter=t.target.value.trim().toLowerCase()}getCertificate(t){let{course_name:e,start_date:a,end_date:c,ucid:n}=this.selectedCourse;a=a.split(" ")[0],c=c.split(" ")[0];const i={day:"numeric",month:"long",weekday:"long",year:"numeric"};let o=new Intl.DateTimeFormat("en-GB-u-ca-islamic",i).format(new Date);o=o.replace(/\u02bb/g,"");const s=new Intl.DateTimeFormat("en-GB",i).format(new Date);this.apiService.getCertificate({username:t.candidate_name,title:e,startDate:a,endDate:c,islamDate:o,date:s,ucid:n,icNo:t.ic_number}).subscribe(e=>{const a=`${k.a.host}/${e.path}`,c=document.createElement("a");c.href=a,c.download=`${t.candidate_name}.pdf`,c.click()},t=>{this.dialog.open(I.a,{data:{imgUrl:"/assets/images/alert-icon.jpg",msg:"Some errors occurred on the server",buttonType:"normal"}})})}getAttendanceDetails(t){return this.getAttendance.emit({userData:t,courseData:this.selectedCourse}),!1}closeAttendancePopup(){}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(R.a),r.Ob(x.a),r.Ob(p.a),r.Ob(u.b))},t.\u0275cmp=r.Ib({type:t,selectors:[["app-datatable-grid"]],viewQuery:function(t,e){var a;1&t&&(r.Jc(d.a,!0),r.Jc(m.a,!0)),2&t&&(r.tc(a=r.dc())&&(e.paginator=a.first),r.tc(a=r.dc())&&(e.sort=a.first))},inputs:{headers:"headers",details:"details",title:"title",selectedCourse:"selectedCourse"},outputs:{getAttendance:"getAttendance"},decls:2,vars:2,consts:[["class","table-box mat-elevation-z8",4,"ngIf"],["class","ipaModalPopup",4,"ngIf"],[1,"table-box","mat-elevation-z8"],[1,"flex-sb"],[1,"header-2","table-header"],[1,"fl-jc-rg","mg-rt-10"],["matInput","","autocomplete","off",3,"placeholder","keyup"],["mat-table","","matSort","",1,"full-width",3,"dataSource"],[3,"matColumnDef",4,"ngFor","ngForOf"],["matColumnDef","noRecord",4,"ngIf"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[4,"ngIf"],[3,"pageSizeOptions"],[3,"matColumnDef"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",3,"ngSwitch",4,"matCellDef"],["mat-header-cell","","mat-sort-header",""],["mat-cell","",3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["class","edit-icon ","matTooltip","Download","matTooltipClass","tooltip-box","aria-hidden","false","aria-label","Example get_app icon",3,"click",4,"ngIf"],["matTooltip","Download","matTooltipClass","tooltip-box","aria-hidden","false","aria-label","Example get_app icon",1,"edit-icon",3,"click"],["class","edit-icon ","matTooltip","Attendance Report","matTooltipClass","tooltip-box","aria-hidden","false","aria-label","Example description icon",3,"click",4,"ngIf"],["matTooltip","Attendance Report","matTooltipClass","tooltip-box","aria-hidden","false","aria-label","Example description icon",1,"edit-icon",3,"click"],["matColumnDef","noRecord"],["mat-footer-cell","","colspan","10","class","ta-center",4,"matFooterCellDef"],["mat-footer-cell","","colspan","10",1,"ta-center"],["mat-header-row",""],["mat-row",""],["mat-footer-row","",4,"matFooterRowDef"],["mat-footer-row",""],[1,"ipaModalPopup"],[1,"backdrop",3,"click"],[1,"content","enrollment-modal"],[1,"modal-close",3,"click"],["matTooltip","Close","matTooltipClass","tooltip-box","aria-hidden","false","aria-label","Example close icon",1,"edit-icon"],[1,"ipaModalPopupContainer"],[1,"text-al-center","no-text"],[1,"candidate-form-container"]],template:function(t,e){1&t&&(r.Dc(0,W,15,12,"div",0),r.Dc(1,tt,10,0,"div",1)),2&t&&(r.mc("ngIf",e.showTable),r.Cb(1),r.mc("ngIf",e.showAttendancePopup))},directives:[c.k,g.b,g.e,h.b,b.n,m.a,c.j,b.k,b.m,d.a,b.c,b.i,b.b,b.h,m.b,b.a,c.l,c.m,c.n,F.a,A.a,b.e,b.d,b.j,b.l,b.g,b.f,$.a],styles:[""]}),t})();var at=a("PA/I");function ct(t,e){if(1&t){const t=r.Vb();r.Ub(0,"div",8),r.Ub(1,"strong"),r.Ec(2,"Error:"),r.Tb(),r.Ec(3," Server error please try after some time "),r.Ub(4,"button",9),r.cc("click",(function(e){return r.wc(t),r.gc().hideErrorMsg()})),r.Ub(5,"span",10),r.Ec(6,"\xd7"),r.Tb(),r.Tb(),r.Tb()}}function nt(t,e){if(1&t){const t=r.Vb();r.Ub(0,"button",11),r.cc("click",(function(e){return r.wc(t),r.gc().getCandidates(!1)})),r.Ec(1),r.Tb()}if(2&t){const t=r.gc();r.Cb(1),r.Fc(t.langObj.val.candidateAdded)}}function it(t,e){if(1&t){const t=r.Vb();r.Ub(0,"button",12),r.cc("click",(function(e){return r.wc(t),r.gc().getCandidates(!0)})),r.Ec(1),r.Tb()}if(2&t){const t=r.gc();r.Cb(1),r.Fc(t.langObj.val.candidateEnrolled)}}function ot(t,e){if(1&t&&(r.Ub(0,"th",39),r.Ec(1),r.Tb()),2&t){const t=r.gc(2);r.Cb(1),r.Gc(" ",t.langObj.val.courseName," ")}}function st(t,e){if(1&t&&(r.Ub(0,"td",40),r.Ec(1),r.Tb()),2&t){const t=e.$implicit;r.Cb(1),r.Gc(" ",t.course_name," ")}}function rt(t,e){if(1&t&&(r.Ub(0,"th",39),r.Ec(1),r.Tb()),2&t){const t=r.gc(2);r.Cb(1),r.Gc(" ",t.langObj.val.startDate," ")}}function lt(t,e){if(1&t&&(r.Ub(0,"td",41),r.Ec(1),r.hc(2,"dateFormat"),r.Tb()),2&t){const t=e.$implicit;r.Cb(1),r.Gc(" ",r.ic(2,1,t.start_date)," ")}}function dt(t,e){if(1&t&&(r.Ub(0,"th",39),r.Ec(1),r.Tb()),2&t){const t=r.gc(2);r.Cb(1),r.Gc(" ",t.langObj.val.endDate," ")}}function bt(t,e){if(1&t&&(r.Ub(0,"td",41),r.Ec(1),r.hc(2,"dateFormat"),r.Tb()),2&t){const t=e.$implicit;r.Cb(1),r.Gc(" ",r.ic(2,1,t.end_date)," ")}}function mt(t,e){if(1&t&&(r.Ub(0,"th",39),r.Ec(1),r.Tb()),2&t){const t=r.gc(2);r.Cb(1),r.Gc(" ",t.langObj.val.days," ")}}function ut(t,e){if(1&t&&(r.Ub(0,"td",41),r.Ec(1),r.Tb()),2&t){const t=e.$implicit;r.Cb(1),r.Gc(" ",t.days," ")}}function ft(t,e){if(1&t&&(r.Ub(0,"th",39),r.Ec(1),r.Tb()),2&t){const t=r.gc(2);r.Cb(1),r.Gc(" ",t.langObj.val.courseSession," ")}}function pt(t,e){if(1&t&&(r.Ub(0,"td",42),r.Ec(1),r.Tb()),2&t){const t=e.$implicit;r.Cb(1),r.Gc(" ",t.session," ")}}function gt(t,e){if(1&t&&(r.Ub(0,"th",39),r.Ec(1),r.Tb()),2&t){const t=r.gc(2);r.Cb(1),r.Gc(" ",t.langObj.val.instructors," ")}}function ht(t,e){if(1&t&&(r.Ub(0,"td",41),r.Ec(1),r.Tb()),2&t){const t=e.$implicit;r.Cb(1),r.Gc(" ",t.instructor," ")}}function Ct(t,e){if(1&t&&(r.Ub(0,"th",39),r.Ec(1),r.Tb()),2&t){const t=r.gc(2);r.Cb(1),r.Gc(" ",t.langObj.val.classSize," ")}}function Dt(t,e){if(1&t&&(r.Ub(0,"td",41),r.Ec(1),r.Tb()),2&t){const t=e.$implicit;r.Cb(1),r.Gc(" ",t.class_size," ")}}function vt(t,e){if(1&t&&(r.Ub(0,"th",39),r.Ec(1),r.Tb()),2&t){const t=r.gc(2);r.Cb(1),r.Gc(" ",t.langObj.val.confirmSeats," ")}}function wt(t,e){if(1&t&&(r.Ub(0,"td",41),r.Ec(1),r.Tb()),2&t){const t=e.$implicit;r.Cb(1),r.Gc(" ",t.confirmed_seat," ")}}function Tt(t,e){if(1&t&&(r.Ub(0,"th",39),r.Ec(1),r.Tb()),2&t){const t=r.gc(2);r.Cb(1),r.Gc(" ",t.langObj.val.nominated," ")}}function Ut(t,e){if(1&t&&(r.Ub(0,"td",41),r.Ec(1),r.Tb()),2&t){const t=e.$implicit;r.Cb(1),r.Gc(" ",t.candidatesCount," ")}}function St(t,e){if(1&t&&(r.Ub(0,"th",39),r.Ec(1),r.Tb()),2&t){const t=r.gc(2);r.Cb(1),r.Gc(" ",t.langObj.val.candidateList," ")}}function yt(t,e){if(1&t){const t=r.Vb();r.Ub(0,"td",43),r.cc("click",(function(a){r.wc(t);const c=e.$implicit;return r.gc(2).getCourseCandidate(c)})),r.Ec(1),r.Tb()}if(2&t){const t=r.gc(2);r.Cb(1),r.Gc(" ",t.langObj.val.candidateList," ")}}function Ot(t,e){if(1&t&&(r.Ub(0,"td",46),r.Ec(1),r.Tb()),2&t){const t=r.gc(3);r.Cb(1),r.Gc(" ",t.langObj.val.noRecordFound,"")}}function Et(t,e){1&t&&(r.Sb(0,44),r.Dc(1,Ot,2,1,"td",45),r.Rb())}function jt(t,e){1&t&&r.Pb(0,"tr",47)}function _t(t,e){1&t&&r.Pb(0,"tr",48)}function It(t,e){1&t&&r.Pb(0,"tr",50)}const Rt=function(){return["noRecord"]};function xt(t,e){1&t&&(r.Sb(0),r.Dc(1,It,1,0,"tr",49),r.Rb()),2&t&&(r.Cb(1),r.mc("matFooterRowDef",r.oc(1,Rt)))}const kt=function(){return[10,25,100]};function Ft(t,e){if(1&t){const t=r.Vb();r.Ub(0,"div",13),r.Ub(1,"div",14),r.Ub(2,"h2",15),r.Ec(3),r.Tb(),r.Ub(4,"mat-form-field",16),r.Ub(5,"mat-label"),r.Ec(6),r.Tb(),r.Ub(7,"input",17),r.cc("keyup",(function(e){return r.wc(t),r.gc().applyFilter(e)})),r.Tb(),r.Tb(),r.Tb(),r.Ub(8,"table",18),r.Sb(9,19),r.Dc(10,ot,2,1,"th",20),r.Dc(11,st,2,1,"td",21),r.Rb(),r.Sb(12,22),r.Dc(13,rt,2,1,"th",20),r.Dc(14,lt,3,3,"td",23),r.Rb(),r.Sb(15,24),r.Dc(16,dt,2,1,"th",20),r.Dc(17,bt,3,3,"td",23),r.Rb(),r.Sb(18,25),r.Dc(19,mt,2,1,"th",20),r.Dc(20,ut,2,1,"td",23),r.Rb(),r.Sb(21,26),r.Dc(22,ft,2,1,"th",20),r.Dc(23,pt,2,1,"td",27),r.Rb(),r.Sb(24,28),r.Dc(25,gt,2,1,"th",20),r.Dc(26,ht,2,1,"td",23),r.Rb(),r.Sb(27,29),r.Dc(28,Ct,2,1,"th",20),r.Dc(29,Dt,2,1,"td",23),r.Rb(),r.Sb(30,30),r.Dc(31,vt,2,1,"th",20),r.Dc(32,wt,2,1,"td",23),r.Rb(),r.Sb(33,31),r.Dc(34,Tt,2,1,"th",20),r.Dc(35,Ut,2,1,"td",23),r.Rb(),r.Sb(36,32),r.Dc(37,St,2,1,"th",20),r.Dc(38,yt,2,1,"td",33),r.Rb(),r.Dc(39,Et,2,0,"ng-container",34),r.Dc(40,jt,1,0,"tr",35),r.Dc(41,_t,1,0,"tr",36),r.Dc(42,xt,2,2,"ng-container",37),r.Tb(),r.Pb(43,"mat-paginator",38),r.Tb()}if(2&t){const t=r.gc();r.Cb(3),r.Fc(t.langObj.val.courseDashboard),r.Cb(3),r.Fc(t.langObj.val.search),r.Cb(1),r.mc("placeholder",t.langObj.val.search),r.Cb(1),r.mc("dataSource",t.dataSource),r.Cb(31),r.mc("ngIf",!t.courses||0===t.courses.length),r.Cb(1),r.mc("matHeaderRowDef",t.courseHeader),r.Cb(1),r.mc("matRowDefColumns",t.courseHeader),r.Cb(1),r.mc("ngIf",!t.courses||0===t.courses.length),r.Cb(1),r.mc("pageSizeOptions",r.oc(9,kt))}}function At(t,e){if(1&t){const t=r.Vb();r.Ub(0,"div",51),r.Ub(1,"app-datatable-grid",52),r.cc("getAttendance",(function(e){return r.wc(t),r.gc().getAttendanceDetails(e)})),r.Tb(),r.Tb()}if(2&t){const t=r.gc();r.Cb(1),r.mc("headers",t.courseCandidateHeader)("details",t.courseCandidateDetails)("title",t.selectedCourse.course_name)("selectedCourse",t.selectedCourse)}}function $t(t,e){1&t&&r.Pb(0,"app-loadingbar",53)}const Gt=function(t){return{"ipa-container":t}};let Pt=(()=>{class t{constructor(t,e,a,c,n,i,o){this.route=t,this.router=e,this.authService=a,this.apiService=c,this.langService=n,this.dialog=i,this.elementRef=o,this.userAccess={},this.loading=!0,this.langObj={},this.langOpt="ms",this.courseHeader=["course_name","start_date","end_date","days","hours","instructor","class_size","confirmed_seat","total","candidates"],this.courseCandidateHeader=["candidate_name","departName","cemail_id","position","salary_grade","status","attended"],this.showErrorMsg=!1,this.courses=[],this.showCandidateTable=!1,this.courseCandidateDetails=!1,this.langService.setLang(this.langService.defaultLangCode),this.langObj=this.langService.langDetail}ngOnInit(){this.userAccess=this.authService.userAccess,(this.userAccess.ipa||this.userAccess.dualRole||this.userAccess.isAdmin)&&(this.courseCandidateHeader.push("certificate"),this.courseCandidateHeader.push("attendanceReport"));let t=this.route.snapshot.data.data.data||[];t=t.map(t=>Object.assign(Object.assign({},t.course),{candidatesCount:t.total})),this.loadingObj=this.apiService.loadingObj,this.courses=t,this.dataSource=new b.o(this.courses),this.userType=this.authService.getUserType(),this.showTable=!0}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}hideErrorMsg(){this.showErrorMsg=!1}redirectToAddCourse(t,e){}redirectToDetails(t){}applyFilter(t){this.dataSource.filter=t.target.value.trim().toLowerCase()}getCandidates(t){}getAttendanceDetails({userData:t,courseData:e}){const a=t.candidate_id,{course_id:c,start_date:n,end_date:i,course_name:o,days:s}=e;this.apiService.getCandidateAttendance(a,c).subscribe(e=>{const{data:a=[]}=e||{};this.dialog.open(_,{data:{start_date:n,end_date:i,course_name:o,days:s,attendanceDetails:a,candidateName:t.candidate_name},panelClass:"attendance-overlay"})},t=>{this.dialog.open(I.a,{data:{imgUrl:"/assets/images/alert-icon.jpg",msg:"Some errors occurred on the server",buttonType:"normal"}})})}getCourseCandidate(t){this.courseCandidateDetails=[],this.showCandidateTable=!1,this.apiService.getCourseCandidate(t.course_id).subscribe(e=>{this.selectedCourse=t;let a=e.data||[];a=a.map(t=>Object.assign(Object.assign({},t.candidate),{status:t.status,attended:t.attended,departName:t.department_name})),this.courseCandidateDetails=a,this.showCandidateTable=!0,window.setTimeout(()=>{const t=window.screen.height,e=(document.querySelector("body"),document.querySelector(".course-candidate-table").getBoundingClientRect());let a=0;e.top>t&&(a=e.top-t);const c=a+e.height/1.5;if(window.scrollY<c){let t=0;const e=window.setInterval(()=>{t>=c?(t=c,window.scrollTo(0,t),window.clearInterval(e)):(t+=5,window.scrollTo(0,t))},5)}},10)},t=>{this.dialog.open(I.a,{data:{imgUrl:"/assets/images/alert-icon.jpg",msg:"Some errors occurred on the server",buttonType:"normal"}})})}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(o.a),r.Ob(o.c),r.Ob(R.a),r.Ob(x.a),r.Ob(p.a),r.Ob(u.b),r.Ob(r.l))},t.\u0275cmp=r.Ib({type:t,selectors:[["app-dashboard"]],viewQuery:function(t,e){var a;1&t&&(r.Jc(d.a,!0),r.Jc(m.a,!0)),2&t&&(r.tc(a=r.dc())&&(e.paginator=a.first),r.tc(a=r.dc())&&(e.sort=a.first))},decls:8,vars:9,consts:[[1,"container-fluid",3,"ngClass"],["class","alert alert-danger alert-dismissible fade show m-t-b-10","role","alert",4,"ngIf"],[1,"filter-box"],["type","button","class","btn bgc-primary",3,"click",4,"ngIf"],["type","button","class","btn bgc-primary mg-l-10",3,"click",4,"ngIf"],["class","table-box mat-elevation-z8",4,"ngIf"],["class","course-candidate-table",4,"ngIf"],["class","ipa-spinner",4,"ngIf"],["role","alert",1,"alert","alert-danger","alert-dismissible","fade","show","m-t-b-10"],["type","button","data-dismiss","alert","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],["type","button",1,"btn","bgc-primary",3,"click"],["type","button",1,"btn","bgc-primary","mg-l-10",3,"click"],[1,"table-box","mat-elevation-z8"],[1,"flex-sb"],[1,"header-2","table-header"],[1,"fl-jc-rg","mg-rt-10"],["matInput","","autocomplete","off",3,"placeholder","keyup"],["mat-table","","matSort","",1,"full-width",3,"dataSource"],["matColumnDef","course_name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","","class","course-name-title",4,"matCellDef"],["matColumnDef","start_date"],["mat-cell","",4,"matCellDef"],["matColumnDef","end_date"],["matColumnDef","days"],["matColumnDef","hours"],["mat-cell","","class","capitalize",4,"matCellDef"],["matColumnDef","instructor"],["matColumnDef","class_size"],["matColumnDef","confirmed_seat"],["matColumnDef","total"],["matColumnDef","candidates"],["mat-cell","","class","max-w-150 table-ellipsis","class","link-label",3,"click",4,"matCellDef"],["matColumnDef","noRecord",4,"ngIf"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[4,"ngIf"],[3,"pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell","",1,"course-name-title"],["mat-cell",""],["mat-cell","",1,"capitalize"],["mat-cell","",1,"link-label",3,"click"],["matColumnDef","noRecord"],["mat-footer-cell","","colspan","10","class","ta-center",4,"matFooterCellDef"],["mat-footer-cell","","colspan","10",1,"ta-center"],["mat-header-row",""],["mat-row",""],["mat-footer-row","",4,"matFooterRowDef"],["mat-footer-row",""],[1,"course-candidate-table"],[3,"headers","details","title","selectedCourse","getAttendance"],[1,"ipa-spinner"]],template:function(t,e){1&t&&(r.Ub(0,"div",0),r.Dc(1,ct,7,0,"div",1),r.Ub(2,"div",2),r.Dc(3,nt,2,1,"button",3),r.Dc(4,it,2,1,"button",4),r.Tb(),r.Dc(5,Ft,44,10,"div",5),r.Tb(),r.Dc(6,At,2,4,"div",6),r.Dc(7,$t,1,0,"app-loadingbar",7)),2&t&&(r.mc("ngClass",r.pc(7,Gt,"ipa"===e.userType)),r.Cb(1),r.mc("ngIf",e.showErrorMsg),r.Cb(2),r.mc("ngIf","ministry"===e.userType),r.Cb(1),r.mc("ngIf","ministry"===e.userType),r.Cb(1),r.mc("ngIf",e.showTable),r.Cb(1),r.mc("ngIf",e.showCandidateTable),r.Cb(1),r.mc("ngIf",e.loadingObj.show))},directives:[c.i,c.k,g.b,g.e,h.b,b.n,m.a,b.c,b.i,b.b,b.k,b.m,d.a,b.h,m.b,b.a,b.e,b.d,b.j,b.l,b.g,b.f,et,at.a],pipes:[C.a],styles:[""]}),t})();var Ht=a("LRne"),Mt=a("JIr8");const zt=[{path:"",component:l,canActivateChild:[s.a],children:[{path:"",component:Pt,resolve:{data:(()=>{class t{constructor(t,e){this.authService=t,this.apiService=e}resolve(t){return this.apiService.getCourse({userId:this.authService.getUserId(),isAll:!0,catId:!1}).pipe(Object(Mt.a)(t=>Object(Ht.a)([])))}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(R.a),r.Yb(x.a))},t.\u0275prov=r.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]}];let Lt=(()=>{class t{}return t.\u0275mod=r.Mb({type:t}),t.\u0275inj=r.Lb({factory:function(e){return new(e||t)},imports:[[o.f.forChild(zt)],o.f]}),t})();a.d(e,"ReportsModule",(function(){return Nt}));let Nt=(()=>{class t{}return t.\u0275mod=r.Mb({type:t}),t.\u0275inj=r.Lb({factory:function(e){return new(e||t)},imports:[[c.c,n.h,Lt,n.r,i.a]]}),t})()}}]);