(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{FoIO:function(e,t,n){"use strict";n.r(t);var c=n("ofXK"),i=n("3Pt+"),s=n("PCNd"),r=n("tyNb"),o=n("I9ts"),a=n("dK5w"),l=n("M9IT"),b=n("+0xr"),d=n("Dh3D"),u=n("fXoL"),m=n("mroY"),h=n("qXBG"),f=n("yTNM"),g=n("0IaG"),p=n("kmnG"),w=n("qFsG"),T=n("NFeN"),v=n("PA/I");let S=(()=>{class e{transform(e,...t){const[n]=t;return e.length>=+n?e.substring(0,+n)+"...":e}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=u.Nb({name:"ellipsis",type:e,pure:!0}),e})();function U(e,t){if(1&e){const e=u.Vb();u.Ub(0,"div",27),u.Ub(1,"strong"),u.Ec(2,"Error:"),u.Tb(),u.Ec(3," Server error please try after some time "),u.Ub(4,"button",28),u.cc("click",(function(t){return u.wc(e),u.gc().hideErrorMsg()})),u.Ub(5,"span",29),u.Ec(6,"\xd7"),u.Tb(),u.Tb(),u.Tb()}}function C(e,t){if(1&e){const e=u.Vb();u.Ub(0,"div",30),u.Ub(1,"strong"),u.Ec(2,"Success:"),u.Tb(),u.Ec(3),u.Ub(4,"button",28),u.cc("click",(function(t){return u.wc(e),u.gc().hideMsg("showSuccessMsg")})),u.Ub(5,"span",29),u.Ec(6,"\xd7"),u.Tb(),u.Tb(),u.Tb()}if(2&e){const e=u.gc();u.Cb(3),u.Gc(" Announcement has been ",e.actionName," successfully. ")}}function D(e,t){if(1&e){const e=u.Vb();u.Ub(0,"div",31),u.Ub(1,"strong"),u.Ec(2,"Message: "),u.Tb(),u.Ec(3),u.Ub(4,"button",28),u.cc("click",(function(t){return u.wc(e),u.gc().hideErrorMsg()})),u.Ub(5,"span",29),u.Ec(6,"\xd7"),u.Tb(),u.Tb(),u.Tb()}if(2&e){const e=u.gc();u.Cb(3),u.Gc(" ",e.warningErrMsg," ")}}function E(e,t){if(1&e){const e=u.Vb();u.Ub(0,"div",32),u.Ub(1,"button",33),u.cc("click",(function(t){return u.wc(e),u.gc().showForm(!1)})),u.Ec(2,"Add Announcement"),u.Tb(),u.Tb()}}function y(e,t){if(1&e){const e=u.Vb();u.Ub(0,"div",34),u.Ub(1,"span",35),u.cc("click",(function(t){return u.wc(e),u.gc().hideForm()})),u.Ec(2,"X"),u.Tb(),u.Ub(3,"div",36),u.Ub(4,"div",37),u.Ub(5,"div",38),u.Ub(6,"form",39),u.cc("ngSubmit",(function(t){return u.wc(e),u.gc().onSubmit(!1)})),u.Ub(7,"mat-form-field",40),u.Ub(8,"mat-label"),u.Ec(9,"Title"),u.Tb(),u.Pb(10,"input",41),u.Tb(),u.Ub(11,"mat-form-field",42),u.Ub(12,"mat-label"),u.Ec(13,"Description"),u.Tb(),u.Pb(14,"textarea",43),u.Tb(),u.Ub(15,"mat-form-field",40),u.Ub(16,"mat-label"),u.Ec(17,"Order"),u.Tb(),u.Pb(18,"input",44),u.Tb(),u.Ub(19,"div",45),u.Ub(20,"button",46),u.Ec(21),u.Tb(),u.Ub(22,"button",47),u.Ec(23),u.Tb(),u.Tb(),u.Tb(),u.Tb(),u.Tb(),u.Tb(),u.Tb()}if(2&e){const e=u.gc();u.Cb(6),u.mc("formGroup",e.formGroup),u.Cb(15),u.Fc(e.langObj.val.reset),u.Cb(2),u.Fc(e.langObj.val.submit)}}function F(e,t){1&e&&(u.Ub(0,"th",48),u.Ec(1," Title "),u.Tb())}function k(e,t){if(1&e){const e=u.Vb();u.Ub(0,"td",49),u.cc("click",(function(n){u.wc(e);const c=t.$implicit;return u.gc().announcementDetails(c)})),u.Ec(1),u.Tb()}if(2&e){const e=t.$implicit;u.Cb(1),u.Gc(" ",e.title," ")}}function I(e,t){1&e&&(u.Ub(0,"th",48),u.Ec(1," Description "),u.Tb())}function M(e,t){if(1&e&&(u.Ub(0,"td",50),u.Ec(1),u.hc(2,"ellipsis"),u.Tb()),2&e){const e=t.$implicit;u.Cb(1),u.Gc(" ",u.jc(2,1,e.description,"100")," ")}}function O(e,t){1&e&&(u.Ub(0,"th",48),u.Ec(1," Order "),u.Tb())}function j(e,t){if(1&e){const e=u.Vb();u.Ub(0,"td",51),u.Ub(1,"input",52),u.cc("keydown",(function(n){u.wc(e);const c=t.$implicit;return u.gc().updateOrder(c,!0,n)}))("blur",(function(n){u.wc(e);const c=t.$implicit;return u.gc().updateOrder(c,!1,n)})),u.Tb(),u.Tb()}if(2&e){const e=t.$implicit;u.Cb(1),u.mc("value",e.ordering)}}function G(e,t){if(1&e&&(u.Ub(0,"th",53),u.Ec(1),u.Tb()),2&e){const e=u.gc();u.Cb(1),u.Gc(" ",e.langObj.val.action," ")}}function A(e,t){if(1&e){const e=u.Vb();u.Ub(0,"td",54),u.Ub(1,"span",55),u.Ub(2,"mat-icon",56),u.cc("click",(function(n){u.wc(e);const c=t.$implicit;return u.gc().editDetails(c)})),u.Ec(3,"edit"),u.Tb(),u.Ub(4,"mat-icon",57),u.cc("click",(function(n){u.wc(e);const c=t.$implicit;return u.gc().delete(c)})),u.Ec(5,"delete_forever"),u.Tb(),u.Tb(),u.Tb()}}function R(e,t){1&e&&u.Pb(0,"tr",58)}function N(e,t){1&e&&u.Pb(0,"tr",59)}function x(e,t){if(1&e&&(u.Ub(0,"div",60),u.Ec(1),u.Tb()),2&e){const e=u.gc();u.Cb(1),u.Fc(e.langObj.val.noRecordFound)}}function P(e,t){1&e&&u.Pb(0,"app-loadingbar",61)}const V=function(e){return{"ipa-container":e}},$=function(){return[10,25,100]},H=[{path:"",component:(()=>{class e{constructor(e,t,n,c){this.langService=e,this.authService=t,this.apiService=n,this.dialog=c,this.langObj={},this.showErrorMsg=!1,this.showFormFields=!1,this.showWarningMsg=!1,this.announcements=[],this.announcementHeaders=["title","description","order","action"],this.userAccess={},this.langService.setLang(this.langService.defaultLangCode),this.langObj=this.langService.langDetail}ngOnInit(){this.announcements=[],this.userAccess=this.authService.userAccess,this.apiService.fetchAnnouncement().subscribe(e=>{const t=e.data||[];this.announcements=t,this.dataSource.disconnect(),this.dataSource=null,setTimeout(()=>{this.dataSource=new b.o(t),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort},100)}),this.dataSource=new b.o(this.announcements),this.userType=this.authService.getUserType(),this.loadingObj=this.apiService.loadingObj,this.formGroup=new i.f({title:new i.c("",[i.s.required]),description:new i.c("",[i.s.required]),order:new i.c(1,i.s.required)})}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}hideErrorMsg(){this.showErrorMsg=!1}applyFilter(e){this.dataSource.filter=e.target.value.trim().toLowerCase()}showForm(e){this.showFormFields=!0}onSubmit(e){if(this.showErrorMsg=!1,this.showSuccessMsg=!1,this.formGroup.valid||e){const t=e||Object.assign({},this.formGroup.value);this.actionName="updated";let n=!0;this.selectedRecord||e?t.id=e?e.id:this.selectedRecord.id:(n=!1,this.actionName="added"),this.apiService.addAnnouncement(t,n).subscribe(e=>{this.showSuccessMsg=!0,this.showFormFields=!1,this.selectedRecord=null,this.formGroup.reset();const t=e.data||[];this.announcements=t,this.dataSource.disconnect(),this.dataSource=null,setTimeout(()=>{this.dataSource=new b.o(t),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort},100)},e=>{this.showErrorMsg=!0})}}hideForm(){this.showFormFields=!1,this.formGroup.reset()}hideMsg(e){this[e]=!1}updateOrder(e,t,n){(n.keyCode&&t&&13===n.keyCode&&+n.target.value!=+e.ordering||!t&&+n.target.value!=+e.ordering)&&(e.order=+n.target.value,this.onSubmit(e))}editDetails(e){this.selectedRecord=e,this.formGroup.setValue({title:e.title,description:e.description,order:e.ordering}),this.showFormFields=!0}delete(e){this.showSuccessMsg=!1,this.selectedRecordToDel=e,this.dialog.open(a.a,{data:{imgUrl:"/assets/images/warning-icon.png",msg:"Are you sure you want to delete this announcement?",buttonType:"action",successBtn:"Confirm"}}).afterClosed().subscribe(e=>{e&&this.apiService.deleteAnnouncemet(this.selectedRecordToDel.id).subscribe(e=>{this.actionName="deleted",this.showSuccessMsg=!0,this.showFormFields=!1,this.selectedRecord=null,this.selectedRecordToDel=null,this.formGroup.reset();const t=e.data||[];this.announcements=t,this.dataSource.disconnect(),this.dataSource=null,setTimeout(()=>{this.dataSource=new b.o(t),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort},100)},e=>{this.showErrorMsg=!0})})}announcementDetails(e){this.dialog.open(a.a,{data:{header:e.title,msg:e.description,buttonType:"normal"}})}}return e.\u0275fac=function(t){return new(t||e)(u.Ob(m.a),u.Ob(h.a),u.Ob(f.a),u.Ob(g.b))},e.\u0275cmp=u.Ib({type:e,selectors:[["app-announcements"]],viewQuery:function(e,t){var n;1&e&&(u.Jc(l.a,!0),u.Jc(d.a,!0)),2&e&&(u.tc(n=u.dc())&&(t.paginator=n.first),u.tc(n=u.dc())&&(t.sort=n.first))},decls:32,vars:18,consts:[[1,"container-fluid",3,"ngClass"],["class","alert alert-danger alert-dismissible fade show m-t-b-10","role","alert",4,"ngIf"],["class","alert alert-success alert-dismissible fade show m-t-b-10","role","alert",4,"ngIf"],["class","alert alert-warning alert-dismissible fade show m-t-b-10","role","alert",4,"ngIf"],["class","filter-box",4,"ngIf"],["class","announcement-forms",4,"ngIf"],[1,"table-box","mat-elevation-z8"],[1,"flex-sb","dashboard-filters"],[1,"header-2","table-header"],[1,"fl-jc-rg","mg-rt-10"],["matInput","","autocomplete","off",3,"placeholder","keyup"],["mat-table","","matSort","",1,"full-width",3,"dataSource"],["matColumnDef","title"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","","class","link-label",3,"click",4,"matCellDef"],["matColumnDef","description"],["mat-cell","","class","announcement-desc",4,"matCellDef"],["matColumnDef","order"],["mat-cell","",4,"matCellDef"],["matColumnDef","action"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","max-w-200",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","no-record-found",4,"ngIf"],[3,"pageSizeOptions"],["class","ipa-spinner",4,"ngIf"],["role","alert",1,"alert","alert-danger","alert-dismissible","fade","show","m-t-b-10"],["type","button","data-dismiss","alert","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],["role","alert",1,"alert","alert-success","alert-dismissible","fade","show","m-t-b-10"],["role","alert",1,"alert","alert-warning","alert-dismissible","fade","show","m-t-b-10"],[1,"filter-box"],["type","button",1,"btn","bgc-primary",3,"click"],[1,"announcement-forms"],[1,"close-icon",3,"click"],[1,"container-fluid"],[1,"row","course-form"],[1,"col-xs-12","col-sm-10","col-md-6","col-sm-offset-1","col-md-offset-2","mg-auto"],[3,"formGroup","ngSubmit"],[1,"full-width"],["matInput","","formControlName","title"],["appearance","outline",1,"full-width"],["matInput","","formControlName","description"],["matInput","","type","number","formControlName","order"],[1,"form-btn","jc-fe"],["type","buton",1,"btn","btn-secondary","reset-btn","mg-rt-10"],["type","submit",1,"btn","bgc-primary"],["mat-header-cell","","mat-sort-header",""],["mat-cell","",1,"link-label",3,"click"],["mat-cell","",1,"announcement-desc"],["mat-cell",""],["type","number",1,"ordering-field",3,"value","keydown","blur"],["mat-header-cell",""],["mat-cell","",1,"max-w-200"],[1,"announcement-action"],["title","Edit","aria-hidden","false","aria-label","Example edit icon",1,"edit-icon",3,"click"],["title","Edit","aria-hidden","false","aria-label","Example delete_forever icon",1,"delete-icon",3,"click"],["mat-header-row",""],["mat-row",""],[1,"no-record-found"],[1,"ipa-spinner"]],template:function(e,t){1&e&&(u.Ub(0,"div",0),u.Dc(1,U,7,0,"div",1),u.Dc(2,C,7,1,"div",2),u.Dc(3,D,7,1,"div",3),u.Dc(4,E,3,0,"div",4),u.Dc(5,y,24,3,"div",5),u.Ub(6,"div",6),u.Ub(7,"div",7),u.Ub(8,"h2",8),u.Ec(9),u.Tb(),u.Ub(10,"mat-form-field",9),u.Ub(11,"mat-label"),u.Ec(12),u.Tb(),u.Ub(13,"input",10),u.cc("keyup",(function(e){return t.applyFilter(e)})),u.Tb(),u.Tb(),u.Tb(),u.Ub(14,"table",11),u.Sb(15,12),u.Dc(16,F,2,0,"th",13),u.Dc(17,k,2,1,"td",14),u.Rb(),u.Sb(18,15),u.Dc(19,I,2,0,"th",13),u.Dc(20,M,3,4,"td",16),u.Rb(),u.Sb(21,17),u.Dc(22,O,2,0,"th",13),u.Dc(23,j,2,1,"td",18),u.Rb(),u.Sb(24,19),u.Dc(25,G,2,1,"th",20),u.Dc(26,A,6,0,"td",21),u.Rb(),u.Dc(27,R,1,0,"tr",22),u.Dc(28,N,1,0,"tr",23),u.Tb(),u.Dc(29,x,2,1,"div",24),u.Pb(30,"mat-paginator",25),u.Tb(),u.Tb(),u.Dc(31,P,1,0,"app-loadingbar",26)),2&e&&(u.mc("ngClass",u.pc(15,V,"ipa"===t.userType)),u.Cb(1),u.mc("ngIf",t.showErrorMsg),u.Cb(1),u.mc("ngIf",t.showSuccessMsg),u.Cb(1),u.mc("ngIf",t.showWarningMsg),u.Cb(1),u.mc("ngIf",t.userAccess.allowAnnouncement||t.userAccess.isAdmin),u.Cb(1),u.mc("ngIf",t.showFormFields),u.Cb(4),u.Fc(t.langObj.val.courseDashboard),u.Cb(3),u.Fc(t.langObj.val.search),u.Cb(1),u.mc("placeholder",t.langObj.val.search),u.Cb(1),u.mc("dataSource",t.dataSource),u.Cb(13),u.mc("matHeaderRowDef",t.announcementHeaders),u.Cb(1),u.mc("matRowDefColumns",t.announcementHeaders),u.Cb(1),u.mc("ngIf",!t.announcements||0===t.announcements.length),u.Cb(1),u.mc("pageSizeOptions",u.oc(17,$)),u.Cb(1),u.mc("ngIf",t.loadingObj.show))},directives:[c.i,c.k,p.b,p.e,w.b,b.n,d.a,b.c,b.i,b.b,b.k,b.m,l.a,i.t,i.n,i.g,i.b,i.m,i.e,i.q,b.h,d.b,b.a,T.a,b.j,b.l,v.a],pipes:[S],styles:[""]}),e})(),canActivate:[o.a]}];let q=(()=>{class e{}return e.\u0275mod=u.Mb({type:e}),e.\u0275inj=u.Lb({factory:function(t){return new(t||e)},imports:[[r.f.forChild(H)],r.f]}),e})();n.d(t,"AnnouncementsModule",(function(){return L}));let L=(()=>{class e{}return e.\u0275mod=u.Mb({type:e}),e.\u0275inj=u.Lb({factory:function(t){return new(t||e)},imports:[[c.c,i.r,q,s.a]]}),e})()}}]);